server:
  port: 3822

spring:
  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB
  web:
    resources:
      static-locations: classpath:/static/,file:frontend/
  mvc:
    static-path-pattern: /**
  main:
    allow-circular-references: true

# 自定义配置
simeng:
  #python虚拟环境所在的目录
  python:
    pyenv-path: ./pyenv # pyenv相对路径（相对于项目根目录）
    python-version: py3.11.0 # 使用的Python版本


  # Python远程服务配置
  python-service:
    enabled: true # 是否启用远程Python服务（true为通过Feign调用，false为本地脚本）
    url: http://localhost:8000 # Python服务地址
    timeout: 300000 # 超时时间（毫秒），默认5分钟

  use-engin-logs: true #true为开启，false为关闭 用于保证引擎输出是否重定向。关闭后将并且不在终端额外启动cmd窗口
  # 缓存目录
  cache-dir: cache
  # 插件目录
  plugin-dir: plugins
  # 仿真引擎目录
  simeng-dir: SimEngPI
  # Python脚本路径（已废弃，保留用于兼容）
  python-scripts:
    mapmaker: map_convert/mapmaker.py
    mapmaker-new: map_convert/mapmaker_new.py
    osmtrans: map_convert/osmtrans.py
  # 允许的前端源
  cors:
    allowed-origins:
      - http://127.0.0.1:7142
      - http://localhost:7142
    allowed-methods:
      - GET
      - POST
      - PUT
      - DELETE
      - OPTIONS
    allowed-headers: "*"
    allow-credentials: true

logging:
  level:
    com.simeng: DEBUG
    org.springframework.web.socket: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

frontend:
  ip: "http://localhost:3822/"

# application.yml
websocket:
  # 作为服务器端的配置（接受前端连接）
  server:
    frontend-path: "/ws/frontend"
    engine-path: "/ws/exe/{exe_id}"
    allowed-origins:
      - "http://127.0.0.1:7142"
      - "http://localhost:7142"
      - "http://localhost:3822"
      - "http://127.0.0.1:3822"
      - "http://localhost:8000"
      - "http://127.0.0.1:8000"
  # 作为客户端连接远程服务的配置
  client:
    front:
      # 远程Front服务的WebSocket地址
      remote-url: "ws://localhost:7142/ws/frontend"  # 请替换为实际的Front服务地址
      # 例如: "ws://192.168.1.100:8080/ws/frontend" 或 "wss://api.example.com/ws/frontend"
      reconnect:
        enabled: true
        max-attempts: 10
        backoff-period: 5000

    engine:
      # 远程Engine服务的WebSocket地址
      remote-url: "ws://localhost:8000/ws/exe"  # 请替换为实际的Engine服务地址
      # 例如: "ws://192.168.1.101:8081/ws/exe" 或 "wss://engine.example.com/ws/exe"
      reconnect:
        enabled: true
        max-attempts: 15
        backoff-period: 3000